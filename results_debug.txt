count_if experiments
hardware threads: 12

================ N = 100000 ================

Cheap predicate (even)
[std::count_if] time 1.5501 ms
[par] time 1.8114 ms

K, time(ms), count
1, 1.5738, 50045
2, 1.2316, 50045
3, 1, 50045
4, 0.9054, 50045
5, 0.8479, 50045
6, 0.7675, 50045
7, 0.8656, 50045
8, 0.9355, 50045
9, 0.944, 50045
10, 0.8935, 50045
11, 1.0183, 50045
12, 0.9038, 50045
13, 1.0668, 50045
14, 1.0728, 50045
15, 1.0629, 50045
16, 1.1036, 50045
17, 1.1601, 50045
18, 1.3356, 50045
19, 1.3095, 50045
20, 1.2754, 50045
21, 1.3251, 50045
22, 1.4535, 50045
23, 1.5893, 50045
24, 1.4804, 50045
Best K = 6 (time=0.7675)

Expensive predicate (prime)
[std::count_if] time 7.9889 ms
[par] time 7.7416 ms

K, time(ms), count
1, 7.8264, 7808
2, 4.2636, 7808
3, 2.9854, 7808
4, 3.395, 7808
5, 2.9558, 7808
6, 2.5754, 7808
7, 2.2621, 7808
8, 2.0847, 7808
9, 1.9128, 7808
10, 1.8924, 7808
11, 2.0928, 7808
12, 2.0528, 7808
13, 2.2372, 7808
14, 2.0788, 7808
15, 2.4434, 7808
16, 2.341, 7808
17, 2.2085, 7808
18, 2.2001, 7808
19, 2.2686, 7808
20, 2.6162, 7808
21, 2.1834, 7808
22, 2.3295, 7808
23, 2.283, 7808
24, 2.2922, 7808
Best K = 10 (time=1.8924)
================ N = 500000 ================

Cheap predicate (even)
[std::count_if] time 7.1633 ms
[par] time 10.0239 ms

K, time(ms), count
1, 8.8115, 250409
2, 5.1341, 250409
3, 3.573, 250409
4, 2.8344, 250409
5, 2.593, 250409
6, 2.2624, 250409
7, 2.8751, 250409
8, 2.3678, 250409
9, 2.5204, 250409
10, 2.2891, 250409
11, 2.3119, 250409
12, 2.1036, 250409
13, 2.1767, 250409
14, 2.4151, 250409
15, 2.0618, 250409
16, 1.8893, 250409
17, 2.1123, 250409
18, 2.0052, 250409
19, 1.8942, 250409
20, 1.9831, 250409
21, 1.9914, 250409
22, 2.1336, 250409
23, 2.162, 250409
24, 2.0642, 250409
Best K = 16 (time=1.8893)

Expensive predicate (prime)
[std::count_if] time 40.5611 ms
[par] time 45.0138 ms

K, time(ms), count
1, 42.8894, 39445
2, 21.5307, 39445
3, 13.7323, 39445
4, 15.2642, 39445
5, 13.5671, 39445
6, 12.5555, 39445
7, 10.7525, 39445
8, 9.7944, 39445
9, 9.9646, 39445
10, 8.9289, 39445
11, 9.2064, 39445
12, 9.3556, 39445
13, 9.7095, 39445
14, 9.6324, 39445
15, 9.8749, 39445
16, 9.4945, 39445
17, 9.4146, 39445
18, 9.9972, 39445
19, 10.1343, 39445
20, 7.3715, 39445
21, 7.1201, 39445
22, 8.5965, 39445
23, 8.1694, 39445
24, 9.2011, 39445
Best K = 21 (time=7.1201)
================ N = 1000000 ================

Cheap predicate (even)
[std::count_if] time 15.23 ms
[par] time 14.5145 ms

K, time(ms), count
1, 14.7067, 501011
2, 8.2336, 501011
3, 5.2583, 501011
4, 5.8781, 501011
5, 4.7683, 501011
6, 4.1025, 501011
7, 6.0189, 501011
8, 4.6881, 501011
9, 4.3289, 501011
10, 4.0492, 501011
11, 4.328, 501011
12, 3.4531, 501011
13, 3.2638, 501011
14, 3.3359, 501011
15, 3.2683, 501011
16, 3.2751, 501011
17, 3.0632, 501011
18, 2.8345, 501011
19, 2.8639, 501011
20, 2.7751, 501011
21, 2.9113, 501011
22, 2.9298, 501011
23, 2.755, 501011
24, 2.9713, 501011
Best K = 23 (time=2.755)

Expensive predicate (prime)
[std::count_if] time 77.2563 ms
[par] time 78.1763 ms

K, time(ms), count
1, 78.628, 78373
2, 42.3643, 78373
3, 40.3057, 78373
4, 33.4015, 78373
5, 26.6851, 78373
6, 22.6161, 78373
7, 19.4179, 78373
8, 17.3353, 78373
9, 15.2315, 78373
10, 13.7448, 78373
11, 12.664, 78373
12, 11.5918, 78373
13, 15.6091, 78373
14, 15.1065, 78373
15, 15.4021, 78373
16, 14.4006, 78373
17, 14.0179, 78373
18, 13.6334, 78373
19, 13.5459, 78373
20, 13.8725, 78373
21, 13.5116, 78373
22, 12.8664, 78373
23, 13.0853, 78373
24, 12.4305, 78373
Best K = 12 (time=11.5918)
================ N = 5000000 ================

Cheap predicate (even)
[std::count_if] time 72.6251 ms
[par] time 72.243 ms

K, time(ms), count
1, 73.5104, 2500257
2, 38.2276, 2500257
3, 30.2645, 2500257
4, 25.7098, 2500257
5, 22.5271, 2500257
6, 18.4425, 2500257
7, 16.0164, 2500257
8, 14.3291, 2500257
9, 12.6881, 2500257
10, 11.5254, 2500257
11, 10.5933, 2500257
12, 9.776, 2500257
13, 12.9943, 2500257
14, 12.209, 2500257
15, 11.9098, 2500257
16, 11.5306, 2500257
17, 11.5057, 2500257
18, 11.1489, 2500257
19, 11.4017, 2500257
20, 10.8783, 2500257
21, 11.0098, 2500257
22, 10.8675, 2500257
23, 10.8957, 2500257
24, 10.3939, 2500257
Best K = 12 (time=9.776)

Expensive predicate (prime)
[std::count_if] time 394.971 ms
[par] time 385.684 ms

K, time(ms), count
1, 386.954, 393013
2, 234.523, 393013
3, 192.583, 393013
4, 140.492, 393013
5, 118.441, 393013
6, 103.606, 393013
7, 92.8461, 393013
8, 80.9369, 393013
9, 71.1329, 393013
10, 65.2232, 393013
11, 60.6505, 393013
12, 56.5054, 393013
13, 70.698, 393013
14, 70.7459, 393013
15, 71.9358, 393013
16, 73.3185, 393013
17, 67.4858, 393013
18, 72.1975, 393013
19, 69.4043, 393013
20, 65.8036, 393013
21, 63.7678, 393013
22, 61.886, 393013
23, 59.2417, 393013
24, 59.515, 393013
Best K = 12 (time=56.5054)
================ N = 10000000 ================

Cheap predicate (even)
[std::count_if] time 143.69 ms
[par] time 146.039 ms

K, time(ms), count
1, 144.398, 4996299
2, 82.1381, 4996299
3, 69.0703, 4996299
4, 53.2149, 4996299
5, 44.0032, 4996299
6, 36.5363, 4996299
7, 31.6094, 4996299
8, 27.8896, 4996299
9, 24.9215, 4996299
10, 22.475, 4996299
11, 20.7152, 4996299
12, 19.9596, 4996299
13, 26.3792, 4996299
14, 25.202, 4996299
15, 24.0192, 4996299
16, 23.3116, 4996299
17, 24.475, 4996299
18, 23.407, 4996299
19, 23.721, 4996299
20, 22.3511, 4996299
21, 23.0801, 4996299
22, 22.2867, 4996299
23, 22.6267, 4996299
24, 22.5861, 4996299
Best K = 12 (time=19.9596)

Expensive predicate (prime)
[std::count_if] time 794.652 ms
[par] time 778.342 ms

K, time(ms), count
1, 815.039, 785847
2, 497.455, 785847
3, 394.422, 785847
4, 298.122, 785847
5, 241.157, 785847
6, 200.804, 785847
7, 180.006, 785847
8, 156.916, 785847
9, 141.86, 785847
10, 131.466, 785847
11, 120.691, 785847
12, 111.396, 785847
13, 134.405, 785847
14, 117.58, 785847
15, 121.951, 785847
16, 124.51, 785847
17, 133.819, 785847
18, 139.369, 785847
19, 136.602, 785847
20, 132.409, 785847
21, 131.487, 785847
22, 137.546, 785847
23, 121.493, 785847
24, 123.734, 785847
Best K = 12 (time=111.396)

Done. Run in -O0 and -O3.