count_if experiments
hardware threads: 12

================ N = 100000 ================

Cheap predicate (even)
[std::count_if] time 0 ms
[par] time 0.0001 ms

K, time(ms), count
1, 0.1462, 49752
2, 0.5009, 49752
3, 0.5167, 49752
4, 0.8869, 49752
5, 0.6552, 49752
6, 0.665, 49752
7, 0.8565, 49752
8, 1.4578, 49752
9, 1.0939, 49752
10, 0.9869, 49752
11, 0.8757, 49752
12, 0.9792, 49752
13, 1.3137, 49752
14, 1.1028, 49752
15, 1.0703, 49752
16, 1.1391, 49752
17, 1.1034, 49752
18, 1.3033, 49752
19, 1.2903, 49752
20, 1.2567, 49752
21, 1.2542, 49752
22, 1.5225, 49752
23, 1.6357, 49752
24, 1.4613, 49752
Best K = 1 (time=0.1462)

Expensive predicate (prime)
[std::count_if] time 0.0001 ms
[par] time 0 ms

K, time(ms), count
1, 6.2936, 7807
2, 3.6037, 7807
3, 2.499, 7807
4, 2.7952, 7807
5, 2.7535, 7807
6, 2.0418, 7807
7, 2.2543, 7807
8, 1.8639, 7807
9, 1.8452, 7807
10, 2.0795, 7807
11, 1.9079, 7807
12, 2.9109, 7807
13, 2.0003, 7807
14, 1.9096, 7807
15, 1.9876, 7807
16, 1.7615, 7807
17, 1.7534, 7807
18, 1.7183, 7807
19, 1.7854, 7807
20, 1.9805, 7807
21, 1.8419, 7807
22, 1.832, 7807
23, 2.0103, 7807
24, 2.4049, 7807
Best K = 18 (time=1.7183)
================ N = 500000 ================

Cheap predicate (even)
[std::count_if] time 0 ms
[par] time 0 ms

K, time(ms), count
1, 0.3519, 249955
2, 0.3624, 249955
3, 0.4019, 249955
4, 0.4516, 249955
5, 0.41, 249955
6, 0.4643, 249955
7, 0.5674, 249955
8, 0.6113, 249955
9, 0.6557, 249955
10, 0.6952, 249955
11, 0.7933, 249955
12, 0.8099, 249955
13, 0.8726, 249955
14, 0.9359, 249955
15, 1.0657, 249955
16, 1.024, 249955
17, 1.3969, 249955
18, 1.1256, 249955
19, 1.2077, 249955
20, 1.257, 249955
21, 1.416, 249955
22, 1.4062, 249955
23, 1.3225, 249955
24, 1.4595, 249955
Best K = 1 (time=0.3519)

Expensive predicate (prime)
[std::count_if] time 0 ms
[par] time 0.0001 ms

K, time(ms), count
1, 32.3917, 39245
2, 16.9216, 39245
3, 11.4294, 39245
4, 14.6629, 39245
5, 12.245, 39245
6, 9.9378, 39245
7, 8.8478, 39245
8, 9.0109, 39245
9, 9.8959, 39245
10, 6.7774, 39245
11, 6.4121, 39245
12, 6.3202, 39245
13, 6.0798, 39245
14, 6.2096, 39245
15, 6.0741, 39245
16, 6.5392, 39245
17, 7.1345, 39245
18, 6.7523, 39245
19, 7.0873, 39245
20, 6.3846, 39245
21, 6.7407, 39245
22, 6.8839, 39245
23, 6.7465, 39245
24, 7.0744, 39245
Best K = 15 (time=6.0741)
================ N = 1000000 ================

Cheap predicate (even)
[std::count_if] time 0 ms
[par] time 0.0001 ms

K, time(ms), count
1, 0.5852, 500166
2, 0.5587, 500166
3, 0.5953, 500166
4, 0.5643, 500166
5, 0.5842, 500166
6, 0.5713, 500166
7, 0.5688, 500166
8, 0.646, 500166
9, 0.7075, 500166
10, 0.7692, 500166
11, 0.883, 500166
12, 0.9332, 500166
13, 0.8869, 500166
14, 1.0069, 500166
15, 1.0383, 500166
16, 1.1102, 500166
17, 1.5766, 500166
18, 1.3385, 500166
19, 1.3575, 500166
20, 1.4184, 500166
21, 2.3292, 500166
22, 1.8925, 500166
23, 1.66, 500166
24, 1.8615, 500166
Best K = 2 (time=0.5587)

Expensive predicate (prime)
[std::count_if] time 0.0001 ms
[par] time 0 ms

K, time(ms), count
1, 65.4152, 78395
2, 34.0427, 78395
3, 28.9625, 78395
4, 27.4192, 78395
5, 24.8929, 78395
6, 19.7416, 78395
7, 19.9582, 78395
8, 19.9344, 78395
9, 14.3109, 78395
10, 14.1864, 78395
11, 15.3888, 78395
12, 12.7208, 78395
13, 12.9601, 78395
14, 13.2717, 78395
15, 16.0851, 78395
16, 15.8149, 78395
17, 13.2447, 78395
18, 12.4844, 78395
19, 11.6947, 78395
20, 12.8157, 78395
21, 11.7332, 78395
22, 12.1054, 78395
23, 11.5619, 78395
24, 11.4675, 78395
Best K = 24 (time=11.4675)
================ N = 5000000 ================

Cheap predicate (even)
[std::count_if] time 0.0001 ms
[par] time 0 ms

K, time(ms), count
1, 3.1195, 2500048
2, 2.4996, 2500048
3, 2.5345, 2500048
4, 2.8059, 2500048
5, 3.0674, 2500048
6, 2.8395, 2500048
7, 3.1756, 2500048
8, 2.3212, 2500048
9, 1.8809, 2500048
10, 2.3166, 2500048
11, 2.8622, 2500048
12, 2.2641, 2500048
13, 2.2266, 2500048
14, 2.1448, 2500048
15, 1.7707, 2500048
16, 1.8463, 2500048
17, 2.2254, 2500048
18, 1.7869, 2500048
19, 1.8084, 2500048
20, 1.8714, 2500048
21, 2.2677, 2500048
22, 2.5798, 2500048
23, 2.2592, 2500048
24, 1.7973, 2500048
Best K = 15 (time=1.7707)

Expensive predicate (prime)
[std::count_if] time 0.0001 ms
[par] time 0 ms

K, time(ms), count
1, 321.729, 392369
2, 183.644, 392369
3, 149.679, 392369
4, 123.717, 392369
5, 102.835, 392369
6, 83.6312, 392369
7, 76.495, 392369
8, 68.7834, 392369
9, 62.6829, 392369
10, 58.2037, 392369
11, 53.4275, 392369
12, 49.4606, 392369
13, 63.1694, 392369
14, 61.1659, 392369
15, 69.9952, 392369
16, 58.1765, 392369
17, 66.6011, 392369
18, 65.0347, 392369
19, 61.0217, 392369
20, 58.1801, 392369
21, 55.136, 392369
22, 53.6562, 392369
23, 51.8376, 392369
24, 91.1491, 392369
Best K = 12 (time=49.4606)
================ N = 10000000 ================

Cheap predicate (even)
[std::count_if] time 0 ms
[par] time 0 ms

K, time(ms), count
1, 7.0061, 5000833
2, 6.8587, 5000833
3, 4.6299, 5000833
4, 3.7364, 5000833
5, 3.0601, 5000833
6, 3.5357, 5000833
7, 3.1246, 5000833
8, 3.0515, 5000833
9, 3.2877, 5000833
10, 3.0585, 5000833
11, 3.3162, 5000833
12, 3.2764, 5000833
13, 2.8615, 5000833
14, 2.9717, 5000833
15, 2.797, 5000833
16, 2.8209, 5000833
17, 2.9085, 5000833
18, 2.8044, 5000833
19, 3.0866, 5000833
20, 3.3554, 5000833
21, 2.9699, 5000833
22, 3.141, 5000833
23, 3.0707, 5000833
24, 3.104, 5000833
Best K = 15 (time=2.797)

Expensive predicate (prime)
[std::count_if] time 0 ms
[par] time 0 ms

K, time(ms), count
1, 656.614, 783530
2, 456.604, 783530
3, 318.876, 783530
4, 263.832, 783530
5, 217.1, 783530
6, 187.5, 783530
7, 153.526, 783530
8, 141.931, 783530
9, 124.427, 783530
10, 109.872, 783530
11, 105.9, 783530
12, 98.0659, 783530
13, 107.306, 783530
14, 111.297, 783530
15, 104.289, 783530
16, 103.266, 783530
17, 98.9567, 783530
18, 99.5716, 783530
19, 104.089, 783530
20, 102.06, 783530
21, 104.264, 783530
22, 102.525, 783530
23, 102.431, 783530
24, 101.782, 783530
Best K = 12 (time=98.0659)

Done. Run in -O0 and -O3.